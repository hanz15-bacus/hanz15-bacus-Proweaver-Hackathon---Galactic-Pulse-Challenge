<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resonance War</title>
    <meta name="description" content="Survive the galactic waves in this thrilling space adventure">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="assets/images/favicon.png">

</head>

<body>
    <div class="starfield" id="starfield"></div>
    <div class="container" id="usernameScreen">
        <header class="game-header">
            <h1 class="game-title">Resonance War</h1>
            <p class="game-subtitle">Enter your callsign, pilot</p>
        </header>
        <div class="username-form">
            <div class="input-group">
                <label for="usernameInput" class="input-label">PILOT CALLSIGN</label>
                <input type="text" id="usernameInput" class="username-input" placeholder="Enter your name..." maxlength="20" autocomplete="off">
                <div class="input-glow"></div>
            </div>
            <button class="menu-btn" id="enterBtn" onclick="enterGame()">Enter Cockpit</button>
            <p class="username-hint">Choose your pilot identity for the galactic logs</p>
        </div>
    </div>
    <!-- Main Menu Screen (initially hidden) -->
    <div class="container hidden" id="mainMenuScreen">
        <header class="game-header">
            <h1 class="game-title">Resonance War</h1>
            <p class="game-subtitle">Survive the cosmic waves</p>
            <div class="pilot-info">
                <span class="pilot-label">PILOT:</span>
                <span class="pilot-name" id="pilotName"></span>
            </div>
        </header>
        <nav class="main-menu">
            <button class="menu-btn" id="startMissionBtn" type="button" onclick="location.href='game.html'">Start Mission</button>
            <button class="menu-btn" onclick="location.href='howtoplay.html'">Flight Manual</button>
            <button class="menu-btn" onclick="location.href='scores.html'">Mission Scores</button>
            <button class="menu-btn" onclick="location.href='settings.html'">Ship Config</button>
            <button class="menu-btn" onclick="location.href='about.html'">About</button>
            <button class="menu-btn" onclick="changePilot()">Change Pilot</button>
        </nav>
    </div>
    
    <!-- Game Screen (initially hidden) -->
    <div class="game-container hidden" id="gameScreen">
        <canvas id="gameCanvas"></canvas>
        
        <div class="ui">
            <div class="health-bar">
                <div class="health-fill" id="healthBar"></div>
            </div>
            <div class="energy-bar">
                <div class="energy-fill" id="energyBar"></div>
            </div>
            <div class="score" id="score">Score: 0</div>
        </div>
        
        <div class="game-over" id="gameOver">
            <div>GAME OVER</div>
            <div style="font-size: 24px; margin-top: 20px;">Press SPACE to restart</div>
        </div>
        
        <div class="controls">
            WASD/Arrow Keys: Move | Mouse: Aim & Shoot | SPACE: Pulse Wave | R: Reload
        </div>
    </div>
    
    <!-- Preload images (optional, for performance) -->
    <div style="display: none;">
        <img id="playerShip" src="../hanz15-bacus-Proweaver-Hackathon---Galactic-Pulse-Challenge/assets/images/Ship1/Ship1.png" alt="Player Ship">
        <img id="enemyShip" src="../hanz15-bacus-Proweaver-Hackathon---Galactic-Pulse-Challenge/assets/images/Ship2/Ship2.png" alt="Enemy Ship">
    </div>
    <!-- Audio elements (optional, for menu music/effects) -->
    <audio id="backgroundMusic" src="assets/audio/Nebula Neon - Cm - 129 BPM.wav" loop preload="auto"></audio>
    <script src="js/main.js"></script>
    <script src="js/entities.js"></script>
    <script src="js/game.js"></script>
    <script>
    let gameInstance = null;
    
    // Function to start the game
    function startGalacticPulseGame() {
        // Hide menu and username screens
        const menu = document.getElementById('mainMenuScreen');
        const user = document.getElementById('usernameScreen');
        const gameScreen = document.getElementById('gameScreen');
        
        if (menu) menu.classList.add('hidden');
        if (user) user.classList.add('hidden');
        if (gameScreen) gameScreen.classList.remove('hidden');
        
        // Initialize the game
        if (!gameInstance) {
            gameInstance = new GalacticPulse();
        }
    }
    
    // Set up the start mission button
    document.addEventListener('DOMContentLoaded', function() {
        const startBtn = document.getElementById('startMissionBtn');
        if (startBtn) {
            startBtn.addEventListener('click', startGalacticPulseGame);
        }
    });
    </script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    var bgm = document.getElementById('backgroundMusic');
    
    // Set volume and preload
    if (bgm) {
        bgm.volume = 0.5; // Set volume to 50%
        bgm.preload = 'auto';
        console.log('Audio element found:', bgm.src);
    } else {
        console.error('Background music element not found!');
    }
    
    function enableAudio() {
        if (bgm) {
            console.log('Attempting to play audio...');
            bgm.play().then(() => {
                console.log('Audio started playing successfully');
            }).catch((error) => {
                console.error('Error playing audio:', error);
                // Try to load and play again
                bgm.load();
                setTimeout(() => {
                    bgm.play().catch(err => console.error('Retry failed:', err));
                }, 100);
            });
        }
        window.removeEventListener('click', enableAudio);
        window.removeEventListener('keydown', enableAudio);
    }
    
    // Add multiple event listeners to ensure audio starts
    window.addEventListener('click', enableAudio);
    window.addEventListener('keydown', enableAudio);
    window.addEventListener('touchstart', enableAudio);
    
    // Also try to enable audio when user interacts with specific elements
    document.addEventListener('click', enableAudio, { once: true });
});
</script>
</body>
</html>